# 小小纺用户画像分析平台 - 服务器使用说明

## 🎯 端口整理结果

经过整理，现在项目已经统一使用 **单一端口 8080** 运行所有功能。

### ✅ 之前的问题
- 多个 Python 进程同时运行在不同端口 (8000, 8001, 8080, 8081)
- 端口冲突导致服务混乱
- 用户不知道应该访问哪个端口

### ✅ 解决方案
创建了 `unified_server.py` 统一服务器脚本，将所有功能整合到单一端口。

## 🚀 启动方式

### 方式1: 使用统一服务器（推荐）
```bash
python unified_server.py
```

### 方式2: 自动清理冲突后启动
```bash
python unified_server.py --stop-conflicts
```

### 方式3: 指定端口启动
```bash
python unified_server.py --port 8081
```

## 📊 功能列表

所有功能现在都可以通过 **http://localhost:8080** 访问：

1. **主仪表板**: http://localhost:8080
   - 用户画像分析
   - 数据统计概览
   - 维度控制器

2. **内容类型分析**: 已集成在主页面中
   - 消息类型分布
   - 内容分析图表

3. **时间习惯分析**: 已集成在主页面中
   - 用户活跃时间
   - 行为模式分析

4. **数据导出功能**: 已集成在主页面中
   - 当前视图导出
   - 内容类型数据导出

## 🛠️ 服务器特性

### 智能端口管理
- 如果 8080 端口被占用，自动尝试 8081、8082 等
- 最多尝试 5 个端口
- 显示实际使用的端口号

### 自动冲突检测
- 使用 `--stop-conflicts` 参数可自动停止冲突的服务
- 智能识别占用 808x 端口的进程
- 安全停止多余的服务器实例

### 跨域支持
- 自动添加 CORS 头
- 支持前端 JavaScript 请求

## 📁 文件结构

```
D:\user-profile-dashboard\
├── unified_server.py          # 统一服务器脚本 (新增)
├── start_server.py           # 原始服务器脚本 (已优化)
├── index.html                # 主页面
├── css/
│   └── dashboard.css         # 样式文件
├── js/
│   ├── dashboard.js          # 主要功能
│   └── dimension-controller.js # 维度控制
└── data/
    └── analytics.json        # 数据文件
```

## 🔧 故障排除

### 端口被占用
```bash
# 查看占用端口的进程
netstat -ano | findstr :8080

# 停止特定进程
taskkill /PID <进程ID> /F

# 或使用统一服务器自动处理
python unified_server.py --stop-conflicts
```

### 数据文件缺失
统一服务器会自动检测数据文件，如果缺失会提示运行数据处理脚本。

### 编码问题
统一服务器已修复中文字符显示问题，使用标准输出格式。

## 📋 使用建议

1. **推荐使用**: `python unified_server.py --stop-conflicts`
2. **避免同时运行**: 不要同时运行多个服务器脚本
3. **访问地址**: 统一使用 http://localhost:8080
4. **停止服务**: 使用 Ctrl+C 正常停止服务器

## 🎉 总结

现在你的项目已经完全整理好了：
- ✅ 单一端口运行 (8080)
- ✅ 智能冲突处理
- ✅ 所有功能集成
- ✅ 自动服务管理
- ✅ 清晰的使用说明

直接运行 `python unified_server.py --stop-conflicts` 即可启动完整的服务！